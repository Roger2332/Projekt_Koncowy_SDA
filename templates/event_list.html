{% extends "base.html" %}

{% block content %}
    <div class="container mt-4">
        <h1 class="mb-4">Lista wydarze≈Ñ</h1>

        <!-- Formularz wyszukiwania -->
        {% include 'search_form_list.html' %}

        <!-- Tabela z wynikami wyszukiwania -->
        {% include 'search_results_list.html' %}

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                populateFilters();
            });

            function populateFilters() {
                // Assuming you need to fetch filter data dynamically via an API
                fetch('/api/getFilters')
                    .then(response => response.json())
                    .then(data => {
                        populateDropdown('placeDropdown', data.places);
                        populateDropdown('categoryDropdown', data.categories);
                        populateDropdown('organizerDropdown', data.organizers);
                    })
                    .catch(error => console.error('Error fetching filters:', error));
            }

            function populateDropdown(dropdownId, options) {
                const dropdown = document.getElementById(dropdownId);
                dropdown.innerHTML = ''; // Clear existing options
                options.forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = option.value;
                    optionElement.textContent = option.label;
                    dropdown.appendChild(optionElement);
                });
            }

            document.getElementById('searchButton').addEventListener('click', function() {
                performSearch();
            });

            function performSearch() {
                // Your existing search functionality
            }
        </script>
    </div>
{% endblock %}
